@model CRE.ViewModels.ApplicationListViewModel

<h2>Ethics Applications</h2>

<!-- Tabs Navigation -->
<ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item">
        <a class="nav-link active" id="approved-evaluation-tab" data-toggle="tab" href="#approved-evaluation" role="tab" aria-controls="approved-evaluation" aria-selected="true">Pending Review Type</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="exempt-tab" data-toggle="tab" href="#exempt" role="tab" aria-controls="exempt" aria-selected="false">Exempt Applications</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="expedited-tab" data-toggle="tab" href="#expedited" role="tab" aria-controls="expedited" aria-selected="false">Expedited Applications</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="full-review-tab" data-toggle="tab" href="#full-review" role="tab" aria-controls="full-review" aria-selected="false">Full Review Applications</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="all-applications-tab" data-toggle="tab" href="#all-applications" role="tab" aria-controls="all-applications" aria-selected="false">All Applications</a>
    </li>
</ul>

<!-- Tab Content -->
<div class="tab-content mt-3" id="myTabContent">
    <!-- Applications Approved for Evaluation Tab -->
    <div class="tab-pane fade show active" id="approved-evaluation" role="tabpanel" aria-labelledby="approved-evaluation-tab">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>UREC No</th>
                    <th>Title of the Research</th>
                    <th>Proponents/ Authors</th>
                    <th>Status</th>
                    <th>Submission Date</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.ApplicationsApprovedForEvaluation == null || !Model.ApplicationsApprovedForEvaluation.Any())
                {
                    <tr>
                        <td colspan="5" class="text-center">No approved applications need review type assignment.</td>
                    </tr>
                }
                else
                {
                    foreach (var application in Model.ApplicationsApprovedForEvaluation)
                    {
                        <tr>
                            <td>
                                <a asp-controller="Chief" asp-action="Details" asp-route-urecNo="@application.UrecNo" class="btn btn-primary">
                                    @application.UrecNo
                                </a>
                            </td>
                            <td>@application.Title</td>
                            <td>
                                <!-- Display main applicant -->
                                @application.NonFundedResearchInfo.AppUser.fName @application.NonFundedResearchInfo.AppUser.lName
                                <br />

                                <!-- Display coproponents if available -->
                                @if (application.NonFundedResearchInfo.CoProponent != null)
                                {
                                    foreach (var coproponent in application.NonFundedResearchInfo.CoProponent)
                                    {
                                        <span>@coproponent.coProponentName</span>

                                        <br />
                                    }
                                }
                            </td>
                            <td>@application.Status</td>
                            <td>@application.SubmissionDate.ToShortDateString()</td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>

    <!-- Exempt Applications Tab -->
    <div class="tab-pane fade" id="exempt" role="tabpanel" aria-labelledby="exempt-tab">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>UREC No</th>
                    <th>Title of the Research</th>
                    <th>Proponents/ Authors</th>
                    <th>Status</th>
                    <th>Submission Date</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.ExemptApplications == null || !Model.ExemptApplications.Any())
                {
                    <tr>
                        <td colspan="4" class="text-center">No exempt applications found.</td>
                    </tr>
                }
                else
                {
                    @foreach (var application in Model.ExemptApplications)
                    {
                        <tr>
                            <td>
                                <a asp-controller="Chief" asp-action="Details" asp-route-urecNo="@application.UrecNo" class="btn btn-primary">
                                    @application.UrecNo
                                </a>
                            </td>
                            <td>@application.Title</td>
                            <td>
                                <!-- Display main applicant -->
                                @if (application.NonFundedResearchInfo?.AppUser != null)
                                {
                                    @application.NonFundedResearchInfo.AppUser.fName @application.NonFundedResearchInfo.AppUser.lName
                                }
                                else
                                {
                                    <span>N/A</span> <!-- Or another appropriate message -->
                                }
                                <br />

                                <!-- Display coproponents if available -->
                                @if (application.NonFundedResearchInfo?.CoProponent != null && application.NonFundedResearchInfo.CoProponent.Any())
                                {
                                    foreach (var coproponent in application.NonFundedResearchInfo.CoProponent)
                                    {
                                        <span>@coproponent.coProponentName</span>
                                        <br />
                                    }
                                }
                                else
                                {
                                    <span>No coproponents available.</span>
                                }
                            </td>
                            <td>@application.Status</td>
                            <td>@application.SubmissionDate.ToShortDateString()</td>
                        </tr>
                    }

                }
            </tbody>
        </table>
    </div>

    <!-- Expedited Applications Tab -->
    <div class="tab-pane fade" id="expedited" role="tabpanel" aria-labelledby="expedited-tab">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>UREC No</th>
                    <th>Title of the Research</th>
                    <th>Proponents/ Authors</th>
                    <th>Status</th>
                    <th>Submission Date</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.ExpeditedApplications == null || !Model.ExpeditedApplications.Any())
                {
                    <tr>
                        <td colspan="4" class="text-center">No expedited applications found.</td>
                    </tr>
                }
                else
                {
                    foreach (var application in Model.ExpeditedApplications)
                    {
                        <tr>
                            <td>
                                <a asp-controller="Chief" asp-action="Details" asp-route-urecNo="@application.UrecNo" class="btn btn-primary">
                                    @application.UrecNo
                                </a>
                            </td>
                            <td>@application.Title</td>
                            <td>@application.Status</td>
                            <td>@application.SubmissionDate.ToShortDateString()</td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>

    <!-- Full Review Applications Tab -->
    <div class="tab-pane fade" id="full-review" role="tabpanel" aria-labelledby="full-review-tab">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>UREC No</th>
                    <th>Title of the Research</th>
                    <th>Proponents/ Authors</th>
                    <th>Status</th>
                    <th>Submission Date</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.FullReviewApplications == null || !Model.FullReviewApplications.Any())
                {
                    <tr>
                        <td colspan="4" class="text-center">No full review applications found.</td>
                    </tr>
                }
                else
                {
                    foreach (var application in Model.FullReviewApplications)
                    {
                        <tr>
                            <td>
                                <a asp-controller="Chief" asp-action="Details" asp-route-urecNo="@application.UrecNo" class="btn btn-primary">
                                    @application.UrecNo
                                </a>
                            </td>
                            <td>@application.Title</td>
                            <td>@application.Status</td>
                            <td>@application.SubmissionDate.ToShortDateString()</td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>

    <!-- All Applications Tab -->
    <div class="tab-pane fade" id="all-applications" role="tabpanel" aria-labelledby="all-applications-tab">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>UREC No</th>
                    <th>Title</th>
                    <th>Status</th>
                    <th>Submission Date</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.AllApplications == null || !Model.AllApplications.Any())
                {
                    <tr>
                        <td colspan="4" class="text-center">No applications found.</td>
                    </tr>
                }
                else
                {
                    foreach (var application in Model.AllApplications)
                    {
                        <tr>
                            <td>
                                <a asp-controller="Chief" asp-action="Details" asp-route-urecNo="@application.UrecNo" class="btn btn-primary">
                                    @application.UrecNo
                                </a>
                            </td>
                            <td>@application.Title</td>
                            <td>@application.Status</td>
                            <td>@application.SubmissionDate.ToShortDateString()</td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>
</div>

<!-- Include jQuery and Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
